"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const ctrl_1 = require("./ctrl");
const view_1 = require("./view");
const class_1 = require("snabbdom/modules/class");
const attributes_1 = require("snabbdom/modules/attributes");
function LichessChat(element, opts) {
    const patch = snabbdom_1.init([class_1.default, attributes_1.default]);
    let vnode, ctrl;
    function redraw() {
        vnode = patch(vnode, view_1.default(ctrl));
    }
    ctrl = ctrl_1.default(opts, redraw);
    const blueprint = view_1.default(ctrl);
    element.innerHTML = '';
    vnode = patch(element, blueprint);
    return ctrl;
}
exports.default = LichessChat;
;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9tYWluLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsdUNBQWdDO0FBR2hDLGlDQUE4QjtBQUM5QixpQ0FBMEI7QUFJMUIsa0RBQTJDO0FBQzNDLDREQUFxRDtBQUlyRCxTQUF3QixXQUFXLENBQUMsT0FBZ0IsRUFBRSxJQUFjO0lBR2xFLE1BQU0sS0FBSyxHQUFHLGVBQUksQ0FBQyxDQUFDLGVBQUssRUFBRSxvQkFBVSxDQUFDLENBQUMsQ0FBQztJQUV4QyxJQUFJLEtBQVksRUFBRSxJQUFVLENBQUE7SUFFNUIsU0FBUyxNQUFNO1FBQ2IsS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLEVBQUUsY0FBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDbkMsQ0FBQztJQUVELElBQUksR0FBRyxjQUFRLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBRTlCLE1BQU0sU0FBUyxHQUFHLGNBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUM3QixPQUFPLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztJQUN2QixLQUFLLEdBQUcsS0FBSyxDQUFDLE9BQU8sRUFBRSxTQUFTLENBQUMsQ0FBQztJQUVsQyxPQUFPLElBQUksQ0FBQztBQUNkLENBQUM7QUFsQkQsOEJBa0JDO0FBQUEsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGluaXQgfSBmcm9tICdzbmFiYmRvbSc7XG5pbXBvcnQgeyBWTm9kZSB9IGZyb20gJ3NuYWJiZG9tL3Zub2RlJ1xuXG5pbXBvcnQgbWFrZUN0cmwgZnJvbSAnLi9jdHJsJztcbmltcG9ydCB2aWV3IGZyb20gJy4vdmlldyc7XG5pbXBvcnQgeyBDaGF0T3B0cywgQ3RybCB9IGZyb20gJy4vaW50ZXJmYWNlcydcbmltcG9ydCB7IFByZXNldEN0cmwgfSBmcm9tICcuL3ByZXNldCdcblxuaW1wb3J0IGtsYXNzIGZyb20gJ3NuYWJiZG9tL21vZHVsZXMvY2xhc3MnO1xuaW1wb3J0IGF0dHJpYnV0ZXMgZnJvbSAnc25hYmJkb20vbW9kdWxlcy9hdHRyaWJ1dGVzJztcblxuZXhwb3J0IHsgQ3RybCBhcyBDaGF0Q3RybCwgQ2hhdFBsdWdpbiB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIExpY2hlc3NDaGF0KGVsZW1lbnQ6IEVsZW1lbnQsIG9wdHM6IENoYXRPcHRzKToge1xuICBwcmVzZXQ6IFByZXNldEN0cmxcbn0ge1xuICBjb25zdCBwYXRjaCA9IGluaXQoW2tsYXNzLCBhdHRyaWJ1dGVzXSk7XG5cbiAgbGV0IHZub2RlOiBWTm9kZSwgY3RybDogQ3RybFxuXG4gIGZ1bmN0aW9uIHJlZHJhdygpIHtcbiAgICB2bm9kZSA9IHBhdGNoKHZub2RlLCB2aWV3KGN0cmwpKTtcbiAgfVxuXG4gIGN0cmwgPSBtYWtlQ3RybChvcHRzLCByZWRyYXcpO1xuXG4gIGNvbnN0IGJsdWVwcmludCA9IHZpZXcoY3RybCk7XG4gIGVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gIHZub2RlID0gcGF0Y2goZWxlbWVudCwgYmx1ZXByaW50KTtcblxuICByZXR1cm4gY3RybDtcbn07XG4iXX0=