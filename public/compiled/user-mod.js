!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Lichess=t()}}((function(){return function t(e,n,o){function r(s,a){if(!n[s]){if(!e[s]){var d="function"==typeof require&&require;if(!a&&d)return d(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};e[s][0].call(u.exports,(function(t){return r(e[s][1][t]||t)}),u,u.exports,t,e,n,o)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(t,e,n){!function(){function t(e,n){if(!(this instanceof t))return new t(e,n);if(!e||"TABLE"!==e.tagName)throw new Error("Element must be a table");this.init(e,n||{})}var n=[],o=function(t){var e;return window.CustomEvent&&"function"==typeof window.CustomEvent?e=new CustomEvent(t):(e=document.createEvent("CustomEvent")).initCustomEvent(t,!1,!1,void 0),e},r=function(t){return t.getAttribute("data-sort")||t.textContent||t.innerText||""},i=function(t,e){return(t=t.trim().toLowerCase())===(e=e.trim().toLowerCase())?0:t<e?1:-1},s=function(t,e){return function(n,o){var r=t(n.td,o.td);return 0===r?e?o.index-n.index:n.index-o.index:r}};t.extend=function(t,e,o){if("function"!=typeof e||"function"!=typeof o)throw new Error("Pattern and sort must be a function");n.push({name:t,pattern:e,sort:o})},t.prototype={init:function(t,e){var n,o,r,i,s=this;if(s.table=t,s.thead=!1,s.options=e,t.rows&&t.rows.length>0)if(t.tHead&&t.tHead.rows.length>0){for(r=0;r<t.tHead.rows.length;r++)if("thead"===t.tHead.rows[r].getAttribute("data-sort-method")){n=t.tHead.rows[r];break}n||(n=t.tHead.rows[t.tHead.rows.length-1]),s.thead=!0}else n=t.rows[0];if(n){var a=function(){s.current&&s.current!==this&&s.current.removeAttribute("aria-sort"),s.current=this,s.sortTable(this)};for(r=0;r<n.cells.length;r++)(i=n.cells[r]).setAttribute("role","columnheader"),"none"!==i.getAttribute("data-sort-method")&&(i.tabindex=0,i.addEventListener("click",a,!1),null!==i.getAttribute("data-sort-default")&&(o=i));o&&(s.current=o,s.sortTable(o))}},sortTable:function(t,e){var a=t.cellIndex,d=i,l="",u=[],c=this.thead?0:1,f=t.getAttribute("data-sort-method"),h=t.getAttribute("aria-sort");if(this.table.dispatchEvent(o("beforeSort")),e||(h="ascending"===h?"descending":"descending"===h?"ascending":this.options.descending?"descending":"ascending",t.setAttribute("aria-sort",h)),!(this.table.rows.length<2)){if(!f){for(;u.length<3&&c<this.table.tBodies[0].rows.length;)(l=(l=r(this.table.tBodies[0].rows[c].cells[a])).trim()).length>0&&u.push(l),c++;if(!u)return}for(c=0;c<n.length;c++)if(l=n[c],f){if(l.name===f){d=l.sort;break}}else if(u.every(l.pattern)){d=l.sort;break}for(this.col=a,c=0;c<this.table.tBodies.length;c++){var m,b=[],p={},g=0,w=0;if(!(this.table.tBodies[c].rows.length<2)){for(m=0;m<this.table.tBodies[c].rows.length;m++)"none"===(l=this.table.tBodies[c].rows[m]).getAttribute("data-sort-method")?p[g]=l:b.push({tr:l,td:r(l.cells[this.col]),index:g}),g++;for("descending"===h?b.sort(s(d,!0)):(b.sort(s(d,!1)),b.reverse()),m=0;m<g;m++)p[m]?(l=p[m],w++):l=b[m-w].tr,this.table.tBodies[c].appendChild(l)}}this.table.dispatchEvent(o("afterSort"))}},refresh:function(){void 0!==this.current&&this.sortTable(this.current,!0)}},void 0!==e&&e.exports?e.exports=t:window.Tablesort=t}()},{}],2:[function(t,e,n){var o=t("tablesort");var r=$(".user-show .mod-zone-toggle"),i=$(".user-show .mod-zone");function s(){var t,e,n;$(".user-show").css("overflow","visible"),i.html(lichess.spinnerHtml).removeClass("none"),t={node:i[0],url:r.attr("href"),callback:lichess.debounce((function(){!function t(e){lichess.pubsub.emit("content_loaded"),$("#mz_menu .mz_plan").toggleClass("disabled",!$("#mz_plan").length),e.find("form.xhr").submit((function(){return $(this).find("input").attr("disabled",!0),$.ajax({...lichess.formAjax($(this)),success:function(n){$("#mz_actions").replaceWith(n),t(e)}}),!1})),e.find("form.fide_title select").on("change",(function(){$(this).parent("form").submit()}));var n,r=e.find("#mz_mod_log ul").children();r.length>20&&(r.slice(20).addClass("modlog-hidden").hide().first().before('<a id="modlog-show">Show all '+r.length+" mod log entries...</a>"),e.find("#modlog-show").click((function(){e.find(".modlog-hidden").show(),$(this).remove()}))),e.find("li.ip").slice(0,3).filter(":not(.loaded)").addClass("loaded").each((function(){var t=$(this);$(this).one("mouseover",(function(){$.ajax({url:"/mod/ip-intel?ip="+$(this).find(".address ip").text(),success:function(e){t.append($('<span class="intel">'+e+"% proxy</span>"))}})}))})),n=function(t){return t.replace(/[^\-?0-9.]/g,"")},o.extend("number",(function(t){return t.match(/^-?[£\x24Û¢´€]?\d+\s*([,.]\d{0,2})/)||t.match(/^-?\d+\s*([,.]\d{0,2})?[£\x24Û¢´€]/)||t.match(/^-?(\d)*-?([,.]){0,1}-?(\d)+([E,e][-+][\d]+)?%?$/)}),(function(t,e){return t=n(t),function(t,e){return t=parseFloat(t),e=parseFloat(e),(t=isNaN(t)?0:t)-(e=isNaN(e)?0:e)}(e=n(e),t)})),e.find("#mz_others table").each((function(){o(this,{descending:!0})}))}(i)}),300)},e=new EventSource(t.url),n=!0,e.addEventListener("message",(function(e){var o=e.data;o&&(n?(n=!1,t.node.innerHTML=o):t.node.innerHTML+=o,t.callback())})),e.onerror=function(){e.close()}}r.click((function(){return i.hasClass("none")?s():i.addClass("none"),!1})),location.search.startsWith("?mod")&&r.click()},{tablesort:1}]},{},[2])(2)}));