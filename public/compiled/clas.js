!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Lichess=t()}}((function(){return function t(e,n,r){function o(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var c=n[s]={exports:{}};e[s][0].call(c.exports,(function(t){return o(e[s][1][t]||t)}),c,c.exports,t,e,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,n){!function(){function t(e,n){if(!(this instanceof t))return new t(e,n);if(!e||"TABLE"!==e.tagName)throw new Error("Element must be a table");this.init(e,n||{})}var n=[],r=function(t){var e;return window.CustomEvent&&"function"==typeof window.CustomEvent?e=new CustomEvent(t):(e=document.createEvent("CustomEvent")).initCustomEvent(t,!1,!1,void 0),e},o=function(t){return t.getAttribute("data-sort")||t.textContent||t.innerText||""},i=function(t,e){return(t=t.trim().toLowerCase())===(e=e.trim().toLowerCase())?0:t<e?1:-1},s=function(t,e){return function(n,r){var o=t(n.td,r.td);return 0===o?e?r.index-n.index:n.index-r.index:o}};t.extend=function(t,e,r){if("function"!=typeof e||"function"!=typeof r)throw new Error("Pattern and sort must be a function");n.push({name:t,pattern:e,sort:r})},t.prototype={init:function(t,e){var n,r,o,i,s=this;if(s.table=t,s.thead=!1,s.options=e,t.rows&&t.rows.length>0)if(t.tHead&&t.tHead.rows.length>0){for(o=0;o<t.tHead.rows.length;o++)if("thead"===t.tHead.rows[o].getAttribute("data-sort-method")){n=t.tHead.rows[o];break}n||(n=t.tHead.rows[t.tHead.rows.length-1]),s.thead=!0}else n=t.rows[0];if(n){var a=function(){s.current&&s.current!==this&&s.current.removeAttribute("aria-sort"),s.current=this,s.sortTable(this)};for(o=0;o<n.cells.length;o++)(i=n.cells[o]).setAttribute("role","columnheader"),"none"!==i.getAttribute("data-sort-method")&&(i.tabindex=0,i.addEventListener("click",a,!1),null!==i.getAttribute("data-sort-default")&&(r=i));r&&(s.current=r,s.sortTable(r))}},sortTable:function(t,e){var a=t.cellIndex,u=i,d="",c=[],l=this.thead?0:1,f=t.getAttribute("data-sort-method"),h=t.getAttribute("aria-sort");if(this.table.dispatchEvent(r("beforeSort")),e||(h="ascending"===h?"descending":"descending"===h?"ascending":this.options.descending?"descending":"ascending",t.setAttribute("aria-sort",h)),!(this.table.rows.length<2)){if(!f){for(;c.length<3&&l<this.table.tBodies[0].rows.length;)(d=(d=o(this.table.tBodies[0].rows[l].cells[a])).trim()).length>0&&c.push(d),l++;if(!c)return}for(l=0;l<n.length;l++)if(d=n[l],f){if(d.name===f){u=d.sort;break}}else if(c.every(d.pattern)){u=d.sort;break}for(this.col=a,l=0;l<this.table.tBodies.length;l++){var p,m=[],b={},w=0,g=0;if(!(this.table.tBodies[l].rows.length<2)){for(p=0;p<this.table.tBodies[l].rows.length;p++)"none"===(d=this.table.tBodies[l].rows[p]).getAttribute("data-sort-method")?b[w]=d:m.push({tr:d,td:o(d.cells[this.col]),index:w}),w++;for("descending"===h?m.sort(s(u,!0)):(m.sort(s(u,!1)),m.reverse()),p=0;p<w;p++)b[p]?(d=b[p],g++):d=m[p-g].tr,this.table.tBodies[l].appendChild(d)}}this.table.dispatchEvent(r("afterSort"))}},refresh:function(){void 0!==this.current&&this.sortTable(this.current,!0)}},void 0!==e&&e.exports?e.exports=t:window.Tablesort=t}()},{}],2:[function(t,e,n){var r=t("tablesort");$((function(){function t(t){return t.replace(/[^\-?0-9.]/g,"")}$("table.sortable").each((function(){r(this,{descending:!0})})),$(".name-regen").click((function(){return $.get($(this).attr("href"),t=>$("#form3-create-username").val(t)),!1})),$("#form3-teachers").each((function(){const t=this;lichess.loadScript("vendor/textcomplete.js").then((function(){const e=new Textcomplete(new Textcomplete.editors.Textarea(t),{dropdown:{maxCount:10,placement:"bottom"}});e.register([{id:"teacher",match:/(^|\s)(.+)$/,index:2,search:function(e,n){e.length<2?n([]):$.ajax({url:"/player/autocomplete?object=1&teacher=1",data:{term:e},success:function(e){const r=t.value.split("\n").slice(0,-1);n(e.result.filter(t=>!r.includes(t.id)))},error:function(){n([])},cache:!0})},template:function(t,e){return'<span class="ulpt user-link'+(t.online?" online":"")+'" href="/@/'+t.name+'"><i class="line'+(t.patron?" patron":"")+'"></i>'+(t.title?'<span class="title">'+t.title+"</span>&nbsp;":"")+t.name+"</span>"},replace:function(t){return"$1"+t.name+"\n"}}]),e.on("rendered",(function(){e.dropdown.items.length&&e.dropdown.items[0].activate()}))}))})),r.extend("number",(function(t){return t.match(/^[-+]?[£\x24Û¢´€]?\d+\s*([,\.]\d{0,2})/)||t.match(/^[-+]?\d+\s*([,\.]\d{0,2})?[£\x24Û¢´€]/)||t.match(/^[-+]?(\d)*-?([,\.]){0,1}-?(\d)+([E,e][\-+][\d]+)?%?$/)}),(function(e,n){return e=t(e),function(t,e){return t=parseFloat(t),e=parseFloat(e),(t=isNaN(t)?0:t)-(e=isNaN(e)?0:e)}(n=t(n),e)}))}))},{tablesort:1}]},{},[2])(2)}));